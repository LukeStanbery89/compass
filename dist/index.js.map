{"mappings":"iDAYiB,C,UAZjB,SAAmBA,GACf,IAAIC,EAEJ,IACIA,EAAM,IAAIC,IAAIF,E,CAChB,MAAOG,GACL,OAAO,C,CAGX,MAAwB,UAAjBF,EAAIG,UAAyC,WAAjBH,EAAIG,Q,GCRrCC,UACN,MAAMC,EAAYC,QAAQC,EAAAC,KAAUC,EAAAC,MAAe,qBAE7CC,EAaN,WACI,GAAIC,EAAUP,EAAUQ,YACpB,MAAMC,MAAM,uEAGZ,OAAOR,QAAQC,EAAAC,KAAUC,EAAAC,MAAeL,EAAUQ,Y,CAlBpCE,GAChBC,EAAYL,EAAcM,UAC1BC,EAAaP,EAAcQ,WAoBjCC,OAAAC,QAAiB,C,cAlBjB,SAAuBC,GACnB,MAAMC,EAAcL,EAAWI,GAC/B,IAAKC,EACD,MAAMT,MAAM,6CAEhB,MAAMU,EAAKR,EAAUO,EAAYE,SAASD,GAC1C,MAAO,GAAGD,EAAYpB,cAAcqB,KAAMD,EAAYG,OAAOH,EAAYI,M","sources":["src/utils/string-utils.js","src/index.js"],"sourcesContent":["function isHttpURL(string) {\n    let url;\n\n    try {\n        url = new URL(string);\n    } catch (_) {\n        return false;\n    }\n\n    return url.protocol === \"http:\" || url.protocol === \"https:\";\n}\n\nmodule.exports = {\n    isHttpURL,\n};","const path = require('path');\nconst { isHttpURL } = require('./utils/string-utils');\nconst compassrc = require(path.join(process.cwd(), '/.compassrc.json'));\n\nconst compassconfig = _getCompassConfig();\nconst deviceMap = compassconfig.deviceMap;\nconst serviceMap = compassconfig.serviceMap;\n\nfunction getServiceURL(service) {\n    const serviceData = serviceMap[service];\n    if (!serviceData) {\n        throw Error('COMPASS ERROR: Invalid service identifier');\n    }\n    const ip = deviceMap[serviceData.device]?.ip;\n    return `${serviceData.protocol}://${ip}:${serviceData.port}${serviceData.path}`;\n}\n\nfunction _getCompassConfig() {\n    if (isHttpURL(compassrc.configpath)) {\n        throw Error('COMPASS ERROR: Compass currently only supports locally hosted files');\n        // TODO: return compassrc.configpath;\n    } else {\n        return require(path.join(process.cwd(), compassrc.configpath));\n    }\n}\n\nmodule.exports = {\n    getServiceURL,\n};"],"names":["string","url","URL","_","protocol","isHttpURL","$6dbc217b010a975b$var$compassrc","require","$6YMy9$path","join","$6YMy9$process","cwd","$6dbc217b010a975b$var$compassconfig","$6dbc217b010a975b$require$isHttpURL","configpath","Error","$6dbc217b010a975b$var$_getCompassConfig","$6dbc217b010a975b$var$deviceMap","deviceMap","$6dbc217b010a975b$var$serviceMap","serviceMap","module","exports","service","serviceData","ip","device","port","path"],"version":3,"file":"index.js.map"}